{% extends "base.html" %}
{% block content %}

<div class="row register-form-container">
    <form class="col s12 m8 offset-m2">
      <div class="card-panel register-card">
          <h3>
            {{ username }}'s Profile
          </h3>
          {% if session.admin|lower == "yes" %}
          <p>Is Admin</p>
          {% endif %}
          {% if session.guru|lower == "yes" %}
          <p>Is Guru</p>
          {% endif %}
      </div>
    </form>
  </div>



  <div class="row">
    <div class="col s12 m7">
      <div class="card">
        <div class="card-image">
          {% if user_details.user_image %}
          <img src="{{ url_for('file', filename=user_details.user_image) }}">
          {% else %}
          <img src="{{ url_for('static', filename='img/blank_profile_image.png') }}">
          {% endif %}
          <span class="card-title">{{ user_details.username }}</span>
        </div>
        <div class="card-content">
          {% if user_details.user_description %}
          <p>{{ user_details.user_description }}</p>
          {% else %}
          <p>No information yet</p>
          {% endif %}
        </div>
        <div class="card-action">
          <a href="{{ url_for('edit_profile', username_id=user_details._id) }}">Edit My Profile</a>
        </div>
      </div>
    </div>
  </div>

  <br>
  <br>
  {% if session.admin|lower == "yes" %}
  <h2>Users</h2>
  <div class="row">
  {% for user in users %}
  
    
    <div class="col s12 m6">
      <div class="card blue-grey darken-1">
        <div class="card-content white-text">
          <span class="card-title">{{ user.username }}</span>
        </div>
        <div class="card-action">
          <p>{{ user.is_guru }}</p>
          
        </div>
      </div>
      <form class="col s12" method="POST" action="{{ url_for('update_user', username_id=user._id) }}">
      <div class="switch">
        <label for="is_guru_{{ user.username }}">
          no
          {% if user.is_guru == "yes" %}
          <input type="checkbox" id="is_guru_{{ user.username }}" name="is_guru" checked>
          {% else %}
          <input type="checkbox" id="is_guru_{{ user.username }}" name="is_guru">
          {% endif %}
          <span class="lever"></span>
          yes
        </label>
      </div>
      <button type="submit" class="btn-small">Update</button>
    </form>
    </div>
  
  {% endfor %}
  </div>
  
  {% endif %}

  
  <div>
    <div>
      <h2>Posts</h2>
      {% for review in created_reviews %}
      <div class="row">
        <div class="col s12 m6">
          <div class="card blue-grey darken-1">
            <div class="card-content white-text">
              <span class="card-title">{{ review.location_name }}</span>
              <span class="card-title">{{ review.review_title }}</span>
              <p>{{ review.review_description }}</p>
            </div>
            <div class="card-action">
              <p>{{ review.created_by }}</p>
              {% if session.user|lower == review.created_by|lower or session.admin|lower == "yes" %}
              <a href="{{ url_for('delete_post', post_id=review._id) }}" class="btn-small">Delete</a>
              <a href="{{ url_for('edit_post', post_id=review._id) }}" class="btn-small">Edit</a>
              {% endif %}
            </div>
          </div>
        </div>
      </div>
      {% endfor %}
    </div>
    <div>
      <h2>Questions asked</h2>
      {% for question in asked_questions %}
      <div class="row">
        <div class="col s12 m6">
          <div class="card blue-grey darken-1">
            <div class="card-content white-text">
              <span class="card-title">{{ question.question_title }}</span>
              <p>{{ question.question_description }}</p>
            </div>
            <div class="card-action">
              <p>{{ question.created_by }}</p>
              {% if session.user|lower == question.created_by|lower or session.admin|lower == "yes" %}
              <a href="{{ url_for('delete_question', question_id=question._id) }}" class="btn-small">Delete</a>
              <a href="{{ url_for('edit_question', question_id=question._id) }}" class="btn-small">Edit</a>
              {% endif %}
            </div>
          </div>
        </div>
      </div>
      {% endfor %}
    </div>
  </div>



{% endblock %}